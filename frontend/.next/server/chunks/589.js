"use strict";exports.id=589,exports.ids=[589],exports.modules={30120:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(60687),i=s(43210),n=s(30036);s(68651),s(72287);var l=s(97638);new(s.n(l)()).DivIcon({className:"",iconSize:[36,42],iconAnchor:[18,42],popupAnchor:[0,-36],html:`
    <svg width="36" height="42" viewBox="0 0 36 42" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g filter="url(#shadow)">
        <path d="M18 2C10.268 2 4 8.268 4 16.001c0 7.732 11.09 22.13 13.97 25.89a2 2 0 0 0 3.06 0C20.91 38.13 32 23.733 32 16.001 32 8.268 25.732 2 18 2Z" fill="#22c55e"/>
        <circle cx="18" cy="16" r="6" fill="#fff" stroke="#22c55e" stroke-width="2"/>
      </g>
      <defs>
        <filter id="shadow" x="0" y="0" width="36" height="42" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
          <feDropShadow dx="0" dy="2" stdDeviation="2" flood-color="#000" flood-opacity="0.2"/>
        </filter>
      </defs>
    </svg>
  `}),(0,n.default)(async()=>{},{loadableGenerated:{modules:["components\\PepinieresMap.js -> react-leaflet"]},ssr:!1}),(0,n.default)(async()=>{},{loadableGenerated:{modules:["components\\PepinieresMap.js -> react-leaflet"]},ssr:!1}),(0,n.default)(async()=>{},{loadableGenerated:{modules:["components\\PepinieresMap.js -> react-leaflet"]},ssr:!1}),(0,n.default)(async()=>{},{loadableGenerated:{modules:["components\\PepinieresMap.js -> react-leaflet"]},ssr:!1});let a=({pepinieres:e=[],onPepiniereClick:t,mapStyle:s="street",style:n,center:l})=>{let[a,o]=(0,i.useState)(null),[d,c]=(0,i.useState)(!1),[m,u]=(0,i.useState)(0),p=(0,i.useRef)(null);return(0,i.useRef)(null),(0,i.useEffect)(()=>{u(e=>e+1)},[e]),(0,i.useEffect)(()=>{let t=setTimeout(()=>{if(p.current&&(p.current.invalidateSize(),e&&e.length>0)){let t=[];e.forEach(e=>{if(e.latitude&&e.longitude){let s=parseFloat(e.latitude),r=parseFloat(e.longitude);isNaN(s)||isNaN(r)||t.push([s,r])}}),t.length>0&&p.current.fitBounds(t,{padding:[20,20]})}},100);return()=>clearTimeout(t)},[e,m]),(0,i.useLayoutEffect)(()=>{setTimeout(()=>{p.current&&p.current.invalidateSize&&p.current.invalidateSize()},200)},[]),(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Chargement de la carte..."})]})})}},66362:(e,t,s)=>{s.d(t,{A:()=>o});var r=s(60687),i=s(43210),n=s(22710),l=s(48443),a=s(92049);let o=({onImportSuccess:e})=>{let[t,s]=(0,i.useState)(null),[o,d]=(0,i.useState)(!1),[c,m]=(0,i.useState)(!1),[u,p]=(0,i.useState)([]),{showSuccess:h,showError:x}=(0,a.d)(),[f]=(0,n.n)(l.ly),[g]=(0,n.n)(l.I5),v=async()=>{if(!t)return void x("Veuillez s\xe9lectionner un fichier CSV \xe0 importer.");d(!0);try{let{data:r}=await g({variables:{csvFile:t}});if(r.importPepinieresCsv.success){h(r.importPepinieresCsv.message),s(null),p(r.importPepinieresCsv.errors||[]);let t=document.getElementById("csv-pepiniere-file-input");t&&(t.value=""),e&&e()}else x(r.importPepinieresCsv.message),p(r.importPepinieresCsv.errors||[])}catch(e){x("Erreur lors de l'import CSV"),console.error("Import error:",e)}finally{d(!1)}},b=async()=>{m(!0);try{let{data:e}=await f();if(e.exportPepinieresCsv.success){let t=new Blob([e.exportPepinieresCsv.csvData],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),r=URL.createObjectURL(t);s.setAttribute("href",r),s.setAttribute("download",`pepinieres_export_${new Date().toISOString().split("T")[0]}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),h(e.exportPepinieresCsv.message)}else x(e.exportPepinieresCsv.message)}catch(e){x("Erreur lors de l'export CSV"),console.error("Export error:",e)}finally{m(!1)}};return(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-6 text-gray-800 text-center",children:"Import/Export CSV des p\xe9pini\xe8res"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-700",children:"Exporter les p\xe9pini\xe8res"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"T\xe9l\xe9chargez toutes vos p\xe9pini\xe8res au format CSV pour sauvegarder ou partager vos donn\xe9es."}),(0,r.jsx)("button",{onClick:b,disabled:c,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 flex items-center justify-center",children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Export en cours..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Exporter en CSV"]})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-700",children:"Importer des p\xe9pini\xe8res"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Importez des p\xe9pini\xe8res depuis un fichier CSV. T\xe9l\xe9chargez d'abord le mod\xe8le pour voir le format attendu."}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("button",{onClick:()=>{let e=new Blob(['Nom,Adresse,Latitude,Longitude,Description,Nom Gestionnaire,Poste Gestionnaire,T\xe9l\xe9phone Gestionnaire,Email Gestionnaire,Esp\xe8ces Produites,Quantit\xe9 Production G\xe9n\xe9rale,Nom Projet\n"P\xe9pini\xe8re Centrale Lyon","456 Route de la For\xeat, 69000 Lyon",45.764043,4.835659,"P\xe9pini\xe8re sp\xe9cialis\xe9e dans les arbres fruitiers et forestiers","Marie Dubois","Responsable P\xe9pini\xe8re","+33 4 78 90 12 34",marie.dubois@pepiniere.com,"Ch\xeanes, H\xeatres, Pommiers, Cerisiers","5000 plants par an","Reforestation Vall\xe9e du Rh\xf4ne"\n"P\xe9pini\xe8re du Midi Toulouse","789 Chemin des Pins, 31000 Toulouse",43,604652,1,444209,"P\xe9pini\xe8re sp\xe9cialis\xe9e dans les essences m\xe9diterran\xe9ennes","Pierre Martin","Ing\xe9nieur Forestier","+33 5 61 23 45 67",pierre.martin@pepiniere-midi.com,"Pins maritimes, Oliviers, Cypr\xe8s, Lavandes","3000 plants par an","Am\xe9nagement Paysager Occitanie"'],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),s=URL.createObjectURL(e);t.setAttribute("href",s),t.setAttribute("download","template_pepinieres.csv"),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 flex items-center justify-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"T\xe9l\xe9charger le mod\xe8le CSV"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"csv-pepiniere-file-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"S\xe9lectionner un fichier CSV"}),(0,r.jsx)("input",{id:"csv-pepiniere-file-input",type:"file",accept:".csv",onChange:e=>{let t=e.target.files[0];t&&"text/csv"===t.type?(s(t),p([])):(x("Veuillez s\xe9lectionner un fichier CSV valide."),s(null),e.target.value="")},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),(0,r.jsx)("button",{onClick:v,disabled:!t||o,className:"w-full bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 flex items-center justify-center",children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Import en cours..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Importer le CSV"]})})]})]})]}),u.length>0&&(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("h5",{className:"text-sm font-medium text-red-700 mb-2",children:"Erreurs d'import :"}),(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 max-h-40 overflow-y-auto",children:u.map((e,t)=>(0,r.jsxs)("div",{className:"text-sm text-red-600 mb-1",children:["• ",e]},t))})]}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-md",children:[(0,r.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Instructions :"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsxs)("li",{children:["• Les champs ",(0,r.jsx)("strong",{children:"Nom"}),", ",(0,r.jsx)("strong",{children:"Adresse"}),", ",(0,r.jsx)("strong",{children:"Latitude"})," et ",(0,r.jsx)("strong",{children:"Longitude"})," sont obligatoires"]}),(0,r.jsx)("li",{children:"• Les coordonn\xe9es doivent \xeatre des nombres (ex: 45.7640, 4.8357)"}),(0,r.jsx)("li",{children:"• Les champs optionnels : Description, Nom Gestionnaire, Poste Gestionnaire, T\xe9l\xe9phone Gestionnaire, Email Gestionnaire, Esp\xe8ces Produites, Quantit\xe9 Production G\xe9n\xe9rale, Nom Projet"}),(0,r.jsx)("li",{children:"• L'utilisateur sera automatiquement associ\xe9 lors de l'enregistrement"})]})]})]})}}};