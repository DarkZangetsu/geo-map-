(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{347:()=>{},3363:(e,r,t)=>{"use strict";t.d(r,{A:()=>i,d:()=>a});var o=t(5155),s=t(2115);let n=e=>{let{message:r,type:t="info",duration:n=3e3,onClose:i}=e,[a,l]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{let e=setTimeout(()=>{l(!1),setTimeout(()=>i(),300)},n);return()=>clearTimeout(e)},[n,i]),a)?(0,o.jsx)("div",{className:"fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 ".concat((()=>{switch(t){case"success":return"bg-green-500 text-white";case"error":return"bg-red-500 text-white";case"warning":return"bg-yellow-500 text-black";default:return"bg-blue-500 text-white"}})()),children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("span",{className:"font-medium",children:r}),(0,o.jsx)("button",{onClick:()=>{l(!1),setTimeout(()=>i(),300)},className:"ml-4 text-white hover:text-gray-200",children:"\xd7"})]})}):null},i=n;function a(){let[e,r]=(0,s.useState)([]),t=e=>{r(r=>r.filter(r=>r.id!==e))};return{showToast:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,s=Date.now(),n={id:s,message:e,type:t,duration:o};return r(e=>[...e,n]),s},removeToast:t,ToastContainer:()=>(0,o.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(e=>(0,o.jsx)(n,{message:e.message,type:e.type,duration:e.duration,onClose:()=>t(e.id)},e.id))})}}},4917:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,347,23)),Promise.resolve().then(t.bind(t,8398)),Promise.resolve().then(t.bind(t,6254))},5369:(e,r,t)=>{"use strict";t.d(r,{d:()=>s});var o=t(2115);let s=()=>{let[e,r]=(0,o.useState)([]),t=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,s=Date.now(),n={id:s,message:e,type:t,duration:o};return r(e=>[...e,n]),s},[]),s=(0,o.useCallback)(e=>{r(r=>r.filter(r=>r.id!==e))},[]),n=(0,o.useCallback)((e,r)=>t(e,"success",r),[t]),i=(0,o.useCallback)((e,r)=>t(e,"error",r),[t]),a=(0,o.useCallback)((e,r)=>t(e,"warning",r),[t]),l=(0,o.useCallback)((e,r)=>t(e,"info",r),[t]);return{toasts:e,showToast:t,showSuccess:n,showError:i,showWarning:a,showInfo:l,removeToast:s}}},5384:(e,r,t)=>{"use strict";t.d(r,{D1:()=>l,Ep:()=>a,cn:()=>i});var o=t(9159),s=t(2596),n=t(9688);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.QP)((0,s.$)(r))}let a={setAuthData:(e,r)=>{if("string"!=typeof e||!e.trim())return void console.error("setAuthData appel\xe9 avec un token non string:",e);localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(r));try{(0,o.s)(e)}catch(e){}},getToken:()=>localStorage.getItem("token"),getUser:()=>{{let e=localStorage.getItem("user");if(e)try{return JSON.parse(e)}catch(e){console.error("Erreur lors du parsing des donn\xe9es utilisateur:",e)}}return null},isAuthenticated:()=>{let e=a.getToken(),r=a.getUser();return!!(e&&r&&!a.isTokenExpired(e))},clearAuthData:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},isTokenExpired:e=>{if(!e)return!0;try{let r=(0,o.s)(e),t=Date.now()/1e3;return r.exp<t}catch(e){return!0}},decodeToken:e=>{if(!e)return null;try{return(0,o.s)(e)}catch(e){return null}},validateToken:e=>{if(!e||"string"!=typeof e||""===e.trim())return!1;try{let r=(0,o.s)(e),t=Date.now()/1e3;return r.exp>t}catch(e){return console.error("Token invalide:",e),!1}}};function l(e){return e?e.startsWith("http://")||e.startsWith("https://")?e:"".concat("http://91.204.209.201:8000","/media/").concat(e):null}},6254:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>l,h:()=>d});var o=t(5155),s=t(2115);t(9624);var n=t(5695),i=t(5384);let a=(0,s.createContext)();function l(e){let{children:r}=e,[t,l]=(0,s.useState)(null),[d,c]=(0,s.useState)(!1),[h,x]=(0,s.useState)(!0),[m,u]=(0,s.useState)(!1),g=(0,n.useRouter)();(0,s.useEffect)(()=>{let e=i.Ep.getToken(),r=i.Ep.getUser(),t=window.location.pathname;e&&r&&!i.Ep.isTokenExpired(e)?(l(r),c(!0)):(l(null),c(!1),i.Ep.clearAuthData(),["/","/login","/register","/pepinieres-globales","/parcelles-globales","/sieges-globaux"].includes(t)||g.push("/login")),x(!1)},[g]);let p=async()=>{u(!0),await new Promise(e=>setTimeout(e,700)),i.Ep.clearAuthData(),l(null),c(!1),u(!1);let e=window.location.pathname;"/"!==e&&"/login"!==e&&"/register"!==e&&g.push("/")};return(0,o.jsx)(a.Provider,{value:{user:t,isAuthenticated:d,isLoading:h,isLoggingOut:m,login:(e,r)=>{if("string"!=typeof r||!r.trim())return void console.error("Tentative de login avec un token invalide:",r);i.Ep.setAuthData(r,e),l(e),c(!0)},logout:p},children:r})}function d(){return(0,s.useContext)(a)}},8398:(e,r,t)=>{"use strict";t.d(r,{default:()=>M});var o=t(5155),s=t(9249),n=t(1631),i=t(5034),a=t(9311),l=function(e){var r=e.client,t=e.children,o=(0,a.l)(),l=i.useContext(o),d=i.useMemo(function(){return(0,s.Cl)((0,s.Cl)({},l),{client:r||l.client})},[l,r]);return(0,n.V1)(d.client,55),i.createElement(o.Provider,{value:d},t)},d=t(2115),c=t(9624),h=t(5369),x=t(3363),m="(prefers-color-scheme: dark)",u=d.createContext(void 0),g={setTheme:e=>{},themes:[]},p=()=>{var e;return null!=(e=d.useContext(u))?e:g},v=null,f=(e,r)=>{let t;try{t=localStorage.getItem(e)||void 0}catch(e){}return t||r},j=e=>{let r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(r),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(r)},1)}},b=e=>(e||(e=window.matchMedia(m)),e.matches?"dark":"light"),k=t(6671);let w=e=>{let{...r}=e,{theme:t="system"}=p();return(0,o.jsx)(k.l$,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...r})};var y=t(6254),N=t(5695),L=t(5384);function M(e){var r,t,s;let{children:n}=e,{user:i,isLoading:a,isLoggingOut:m,logout:u}=(0,y.h)(),{toasts:g,removeToast:p}=(0,h.d)(),[v,f]=(0,d.useState)(!1),[j,b]=(0,d.useState)(!1),[k,M]=(0,d.useState)(!1),[C,S]=(0,d.useState)(!1),[E,A]=(0,d.useState)(!1),[W,B]=(0,d.useState)(!1),V=(0,N.usePathname)(),T=(0,N.useRouter)(),z="/login"===V||"/register"===V;(0,d.useEffect)(()=>{B(!0)},[]),(0,d.useEffect)(()=>{if(!W)return;let e=e=>{e.target&&document.contains(e.target)&&(e.target.closest(".dropdown-container")||(M(!1),S(!1),A(!1)))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[W]),(0,d.useEffect)(()=>{b(!1),M(!1),S(!1),A(!1),f(!1)},[V]);let H=async()=>{try{f(!1),A(!1),b(!1),await new Promise(e=>setTimeout(e,100)),await u(),T.push("/")}catch(e){console.error("Erreur lors de la d\xe9connexion:",e),f(!1),A(!1),b(!1)}};return a||!W?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,o.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-indigo-200 border-t-indigo-600"}),(0,o.jsx)("p",{className:"text-indigo-600 font-medium",children:"Chargement..."})]})}):(0,o.jsxs)(l,{client:c.A,children:[(0,o.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[m&&(0,o.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,o.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-2xl flex flex-col items-center space-y-4",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-indigo-200 border-t-indigo-600"}),(0,o.jsx)("span",{className:"text-gray-700 font-medium",children:"D\xe9connexion en cours..."})]})}),v&&!m&&(0,o.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,o.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,o.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),(0,o.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Confirmer la d\xe9connexion"}),(0,o.jsx)("p",{className:"text-gray-600 mb-8",children:"\xcates-vous s\xfbr de vouloir vous d\xe9connecter ?"}),(0,o.jsxs)("div",{className:"flex gap-4",children:[(0,o.jsx)("button",{className:"flex-1 px-6 py-3 bg-red-600 text-white rounded-xl hover:bg-red-700 font-semibold transition-all duration-200 transform hover:scale-105",onClick:H,disabled:m,children:"Oui, me d\xe9connecter"}),(0,o.jsx)("button",{className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 font-semibold transition-all duration-200 transform hover:scale-105",onClick:()=>f(!1),disabled:m,children:"Annuler"})]})]})})}),z?(0,o.jsx)("div",{className:"w-full flex items-center px-6 py-6 bg-white/80 backdrop-blur-sm",children:(0,o.jsxs)("a",{href:"/",className:"inline-flex items-center text-indigo-600 font-semibold text-lg hover:text-indigo-700 transition-colors group",children:[(0,o.jsx)("svg",{className:"w-6 h-6 mr-3 transform group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour \xe0 la carte g\xe9n\xe9rale"]})}):(0,o.jsx)("header",{className:"bg-white/80 backdrop-blur-md shadow-sm border-b border-white/20 sticky top-0 z-40",children:(0,o.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,o.jsx)("div",{className:"flex items-center min-w-0",children:(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center shadow-lg",children:(0,o.jsx)("svg",{className:"h-8 w-8",style:{color:"rgb(0,70,144)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,o.jsx)("h1",{className:"text-xl font-bold bg-gradient-to-r from-indigo-600 to-blue-600 bg-clip-text text-transparent",children:"Alliance-Agroforesterie"})]})}),(0,o.jsxs)("div",{className:"hidden lg:flex items-center space-x-2",children:[(0,o.jsxs)("div",{className:"relative dropdown-container",children:[(0,o.jsxs)("button",{onClick:()=>{M(!k),S(!1),A(!1)},className:"flex items-center space-x-2 px-4 py-2.5 text-sm font-medium text-gray-700 bg-white/60 hover:bg-white/80 rounded-xl border border-gray-200/50 transition-all duration-200 hover:shadow-md backdrop-blur-sm",children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,o.jsx)("span",{children:"Vue Globale"}),(0,o.jsx)("svg",{className:"w-4 h-4 transition-transform duration-200 ".concat(k?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),k&&(0,o.jsxs)("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white/95 backdrop-blur-md rounded-2xl shadow-xl border border-gray-200/50 py-2 z-50 transform transition-all duration-200",children:[(0,o.jsxs)("a",{href:"/",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 transition-colors group",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Carte g\xe9n\xe9rale"]}),(0,o.jsxs)("a",{href:"/parcelles-globales",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 transition-colors group",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Sites de r\xe9f\xe9rence"]}),(0,o.jsxs)("a",{href:"/sieges-globaux",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 transition-colors group",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Locaux"]}),(0,o.jsxs)("a",{href:"/pepinieres-globales",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 transition-colors group",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),"P\xe9pini\xe8res"]})]})]}),i&&(0,o.jsxs)("div",{className:"relative dropdown-container",children:[(0,o.jsxs)("button",{onClick:()=>{S(!C),M(!1),A(!1)},className:"flex items-center space-x-2 px-4 py-2.5 text-sm font-medium text-gray-700 bg-white/60 hover:bg-white/80 rounded-xl border border-gray-200/50 transition-all duration-200 hover:shadow-md backdrop-blur-sm",children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,o.jsx)("span",{children:"Mes Donn\xe9es"}),(0,o.jsx)("svg",{className:"w-4 h-4 transition-transform duration-200 ".concat(C?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),C&&(0,o.jsxs)("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white/95 backdrop-blur-md rounded-2xl shadow-xl border border-gray-200/50 py-2 z-50",children:[(0,o.jsxs)("a",{href:"/parcelles",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 transition-colors group",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Mes sites de r\xe9f\xe9rence"]}),(0,o.jsxs)("a",{href:"/sieges",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 transition-colors group",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Mes locaux"]}),(0,o.jsxs)("a",{href:"/pepinieres",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 transition-colors group",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),"Mes p\xe9pini\xe8res"]})]})]})]}),(0,o.jsx)("div",{className:"flex items-center space-x-3",children:i?(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("button",{onClick:()=>b(!j),className:"lg:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-xl transition-colors",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:j?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})}),(0,o.jsxs)("div",{className:"relative dropdown-container",children:[(0,o.jsxs)("button",{onClick:()=>{A(!E),M(!1),S(!1)},className:"flex items-center space-x-3 p-2 hover:bg-white/60 rounded-xl transition-all duration-200 group",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(null==i?void 0:i.logo)?(0,o.jsx)("img",{src:(0,L.D1)(i.logo),alt:"Logo",className:"w-8 h-8 rounded-full border-2 border-white shadow-sm"}):(0,o.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-blue-500 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-white text-sm font-semibold",children:(null==i||null==(r=i.nomInstitution)?void 0:r.charAt(0))||"U"})}),(0,o.jsx)("div",{className:"hidden sm:block text-left",children:(0,o.jsx)("div",{className:"text-sm font-medium text-gray-900",children:null==i?void 0:i.nomInstitution})})]}),(0,o.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform duration-200 ".concat(E?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),E&&(0,o.jsxs)("div",{className:"absolute top-full right-0 mt-2 w-56 bg-white/95 backdrop-blur-md rounded-2xl shadow-xl border border-gray-200/50 py-2 z-50",children:[(0,o.jsx)("div",{className:"px-4 py-3 border-b border-gray-100",children:(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(null==i?void 0:i.logo)?(0,o.jsx)("img",{src:(0,L.D1)(i.logo),alt:"Logo",className:"w-10 h-10 rounded-full border-2 border-white shadow-sm"}):(0,o.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-blue-500 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-white font-semibold",children:(null==i||null==(t=i.nomInstitution)?void 0:t.charAt(0))||"U"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-medium text-gray-900 text-sm",children:null==i?void 0:i.nomInstitution}),(0,o.jsx)("div",{className:"text-xs text-gray-500",children:"Connect\xe9"})]})]})}),(0,o.jsxs)("a",{href:"/profil",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 transition-colors group",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Mon profil"]}),(0,o.jsx)("div",{className:"border-t border-gray-100 mt-2 pt-2",children:(0,o.jsxs)("button",{onClick:()=>{A(!1),f(!0)},className:"w-full flex items-center px-4 py-3 text-sm text-red-600 hover:bg-red-50 hover:text-red-700 transition-colors group",disabled:m,children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"D\xe9connexion"]})})]})]})]}):(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("button",{onClick:()=>b(!j),className:"lg:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-xl transition-colors",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:j?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})}),(0,o.jsxs)("div",{className:"hidden lg:flex items-center space-x-3",children:[(0,o.jsx)("a",{href:"/login",className:"px-4 py-2.5 text-sm font-medium text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 border border-indigo-200 rounded-xl transition-all duration-200 hover:shadow-md",children:"Connexion"}),(0,o.jsx)("a",{href:"/register",className:"px-4 py-2.5 text-sm font-medium text-white bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700 rounded-xl transition-all duration-200 hover:shadow-lg transform hover:scale-105",children:"Inscription"})]})]})})]}),j&&(0,o.jsx)("div",{className:"lg:hidden border-t border-gray-200/50 bg-white/60 backdrop-blur-sm rounded-b-2xl mt-2 overflow-hidden",children:(0,o.jsxs)("div",{className:"px-4 py-6 space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3 flex items-center",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Vue Globale"]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("a",{href:"/",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 rounded-xl transition-colors group",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Carte g\xe9n\xe9rale"]}),(0,o.jsxs)("a",{href:"/parcelles-globales",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 rounded-xl transition-colors group",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Sites de r\xe9f\xe9rence"]}),(0,o.jsxs)("a",{href:"/sieges-globaux",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 rounded-xl transition-colors group",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Locaux"]}),(0,o.jsxs)("a",{href:"/pepinieres-globales",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 rounded-xl transition-colors group",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),"P\xe9pini\xe8res"]})]})]}),i&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3 flex items-center",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Mes Donn\xe9es"]}),(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsxs)("a",{href:"/parcelles",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 rounded-xl transition-colors group",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Mes sites de r\xe9f\xe9rence"]}),(0,o.jsxs)("a",{href:"/sieges",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 rounded-xl transition-colors group",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Mes locaux"]}),(0,o.jsxs)("a",{href:"/pepinieres",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 rounded-xl transition-colors group",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),"Mes p\xe9pini\xe8res"]})]})]}),i&&(0,o.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3 px-4 py-3 bg-gray-50 rounded-xl mb-3",children:[(null==i?void 0:i.logo)?(0,o.jsx)("img",{src:(0,L.D1)(i.logo),alt:"Logo",className:"w-10 h-10 rounded-full border-2 border-white shadow-sm"}):(0,o.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-blue-500 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-white font-semibold",children:(null==i||null==(s=i.nomInstitution)?void 0:s.charAt(0))||"U"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-medium text-gray-900 text-sm",children:null==i?void 0:i.nomInstitution}),(0,o.jsx)("div",{className:"text-xs text-gray-500",children:"Connect\xe9"})]})]}),(0,o.jsxs)("a",{href:"/profil",className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 rounded-xl transition-colors group mb-2",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3 text-gray-400 group-hover:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Mon profil"]}),(0,o.jsxs)("button",{onClick:()=>{b(!1),f(!0)},className:"w-full flex items-center px-4 py-3 text-sm text-red-600 hover:bg-red-50 hover:text-red-700 rounded-xl transition-colors group",disabled:m,children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"D\xe9connexion"]})]}),!i&&(0,o.jsxs)("div",{className:"border-t border-gray-200 pt-4 space-y-3",children:[(0,o.jsx)("a",{href:"/login",className:"block w-full px-4 py-3 text-sm font-medium text-center text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 border border-indigo-200 rounded-xl transition-all duration-200",children:"Connexion"}),(0,o.jsx)("a",{href:"/register",className:"block w-full px-4 py-3 text-sm font-medium text-center text-white bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700 rounded-xl transition-all duration-200 shadow-lg",children:"Inscription"})]})]})})]})}),(0,o.jsxs)("main",{className:"h-full",children:[n,(0,o.jsx)(w,{})]})]}),g.map(e=>(0,o.jsx)(x.A,{message:e.message,type:e.type,duration:e.duration,onClose:()=>p(e.id)},e.id))]})}},9624:(e,r,t)=>{"use strict";t.d(r,{A:()=>m});var o=t(8592),s=t(524),n=t(2641),i=t(4076),a=t(1957),l=t(883),d=t(9159);let c=(0,l.A)({uri:"".concat("http://91.204.209.201:8000","/graphql/")}),h=(0,i.o)((e,r)=>{let{headers:t}=r,o=localStorage.getItem("token");if(o)try{let e=(0,d.s)(o),r=Date.now()/1e3;if(e.exp<r)return localStorage.removeItem("token"),localStorage.removeItem("user"),{headers:{...t,authorization:""}}}catch(e){return console.error("Apollo Client - Erreur lors du d\xe9codage du token:",e),localStorage.removeItem("token"),localStorage.removeItem("user"),{headers:{...t,authorization:""}}}return{headers:{...t,authorization:o?"JWT ".concat(o):""}}}),x=(0,a.S)(e=>{let{graphQLErrors:r,networkError:t,operation:o,forward:s}=e;r&&r.forEach(e=>{let{message:r,locations:t,path:o,extensions:s}=e;console.error("[GraphQL error]: Message: ".concat(r,", Location: ").concat(t,", Path: ").concat(o)),((null==s?void 0:s.code)==="UNAUTHENTICATED"||r.includes("authentication")||r.includes("decoding signature")||r.includes("token")||r.includes("expired"))&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/errors/401"),((null==s?void 0:s.code)==="BAD_REQUEST"||r.includes("bad request")||r.includes("invalid"))&&(window.location.href="/errors/400"),((null==s?void 0:s.code)==="NOT_FOUND"||r.includes("not found"))&&(window.location.href="/errors/404"),((null==s?void 0:s.code)==="INTERNAL_SERVER_ERROR"||r.includes("server error"))&&(window.location.href="/errors/500")}),t&&(console.error("[Network error]: ".concat(t)),400===t.statusCode?window.location.href="/errors/400":401===t.statusCode?(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/errors/401"):404===t.statusCode?window.location.href="/errors/404":500===t.statusCode&&(window.location.href="/errors/500"))}),m=new o.R({link:(0,s.H)([x,h,c]),cache:new n.D,defaultOptions:{watchQuery:{errorPolicy:"all"},query:{errorPolicy:"all"}}})}},e=>{var r=r=>e(e.s=r);e.O(0,[7690,2871,9516,6671,8441,1684,7358],()=>r(4917)),_N_E=e.O()}]);