"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6358],{6358:(e,t,s)=>{s.d(t,{A:()=>h});var r=s(5155),i=s(2115),a=s(5028),o=s(4437);s(1191);var l=s(5752);let n=new(s.n(l)()).DivIcon({className:"",iconSize:[36,42],iconAnchor:[18,42],popupAnchor:[0,-36],html:'\n    <svg width="36" height="42" viewBox="0 0 36 42" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <g filter="url(#shadow)">\n        <path d="M18 2C10.268 2 4 8.268 4 16.001c0 7.732 11.09 22.13 13.97 25.89a2 2 0 0 0 3.06 0C20.91 38.13 32 23.733 32 16.001 32 8.268 25.732 2 18 2Z" fill="#ef4444"/>\n        <circle cx="18" cy="16" r="6" fill="#fff" stroke="#ef4444" stroke-width="2"/>\n      </g>\n      <defs>\n        <filter id="shadow" x="0" y="0" width="36" height="42" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n          <feDropShadow dx="0" dy="2" stdDeviation="2" flood-color="#000" flood-opacity="0.2"/>\n        </filter>\n      </defs>\n    </svg>\n  '}),d=(0,a.default)(()=>s.e(1802).then(s.bind(s,1802)).then(e=>e.MapContainer),{loadableGenerated:{webpack:()=>[1802]},ssr:!1}),c=(0,a.default)(()=>s.e(1802).then(s.bind(s,1802)).then(e=>e.TileLayer),{loadableGenerated:{webpack:()=>[1802]},ssr:!1}),m=(0,a.default)(()=>s.e(1802).then(s.bind(s,1802)).then(e=>e.Marker),{loadableGenerated:{webpack:()=>[1802]},ssr:!1}),h=e=>{let{sieges:t=[],onSiegeClick:s,mapStyle:a="street",style:l,center:h}=e,[x,u]=(0,i.useState)(null),[p,g]=(0,i.useState)(!1),[w,b]=(0,i.useState)(0),v=(0,i.useRef)(null),f={street:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",satellite:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",hybrid:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"},j={street:"\xa9 OpenStreetMap contributors",satellite:"Tiles \xa9 Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",hybrid:"\xa9 Esri"};(0,i.useEffect)(()=>{b(e=>e+1)},[t]),(0,i.useEffect)(()=>{let e=setTimeout(()=>{v.current&&v.current.invalidateSize()},100);return()=>clearTimeout(e)},[t,w]),(0,i.useLayoutEffect)(()=>{setTimeout(()=>{v.current&&v.current.invalidateSize&&v.current.invalidateSize()},200)},[]);let N=e=>{u(e),s&&s(e);let t=Number(e.latitude),r=Number(e.longitude);"number"!=typeof t||"number"!=typeof r||isNaN(t)||isNaN(r)||!v.current?console.warn("Coordonn\xe9es invalides pour le si\xe8ge (setView)",e):v.current.setView([t,r],15)};return(0,r.jsxs)("div",{className:"w-full h-full relative flex",style:{height:void 0!==l&&l.height?l.height:"100%",width:void 0!==l&&l.width?l.width:"100%",minHeight:void 0!==l&&l.height?void 0:"400px",minWidth:void(void 0!==l&&l.width),margin:0,padding:0},children:[(0,r.jsxs)(d,{ref:v,center:h||[-18.7669,46.8691],zoom:6,minZoom:2,maxZoom:19,style:{height:"100%",width:"100%",minHeight:void 0!==l&&l.height?void 0:"400px",minWidth:void(void 0!==l&&l.width)},className:"z-0",maxBounds:[[-25.607,43.254],[-11.945,50.483]],maxBoundsViscosity:1,whenReady:()=>{setTimeout(()=>{v.current&&v.current.invalidateSize&&v.current.invalidateSize()},200)},onClick:e=>{u(null)},children:[(0,r.jsx)(c,{url:f[a]||f.street,attribution:j[a]||j.street}),"satellite"===a&&(0,r.jsx)(c,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",attribution:"Labels \xa9 Esri"}),"hybrid"===a&&(0,r.jsx)(c,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"\xa9 OpenStreetMap contributors",opacity:.7}),Array.isArray(t)&&t.length>0&&t.map(e=>{let t=Number(e.latitude),s=Number(e.longitude);return"number"!=typeof t||"number"!=typeof s||isNaN(t)||isNaN(s)?(console.warn("Coordonn\xe9es invalides pour le si\xe8ge",e),null):(0,r.jsx)(m,{position:[t,s],icon:n,eventHandlers:{click:()=>N(e)}},e.id)})]},w),x&&(0,r.jsxs)("div",{className:"fixed top-0 right-0 h-full w-full sm:w-[420px] bg-gradient-to-br from-slate-50 to-white backdrop-blur-lg shadow-xl z-50 flex flex-col border-0 rounded-3xl m-3 max-w-[440px]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-6 py-5 bg-gradient-to-r from-red-50/80 to-rose-50/80 backdrop-blur-sm sticky top-0 z-10 rounded-t-3xl border-b border-red-100/50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[x.user&&x.user.logo?(0,r.jsx)("img",{src:x.user.logo.startsWith("http")?x.user.logo:"".concat("http://91.204.209.201:8000","/media/").concat(x.user.logo),alt:"Logo",className:"w-10 h-10 rounded-full object-cover border border-red-200 bg-white"}):(0,r.jsx)("span",{className:"inline-flex items-center justify-center w-10 h-10 bg-gradient-to-br from-red-100 to-rose-100 text-red-600 rounded-2xl shadow-sm",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,r.jsx)("circle",{cx:"12",cy:"8",r:"4"}),(0,r.jsx)("path",{d:"M4 20c0-4 4-7 8-7s8 3 8 7"})]})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-slate-800 tracking-tight",children:"D\xe9tails du local"})]}),(0,r.jsx)("button",{onClick:()=>u(null),className:"text-slate-400 hover:text-red-500 text-2xl transition-all duration-200 rounded-2xl p-2 hover:bg-red-50/50 focus:outline-none focus:ring-2 focus:ring-red-200",title:"Fermer",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-5",children:[(0,r.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-sm border border-slate-100/50 p-5",children:[(0,r.jsx)("h3",{className:"font-semibold text-xl text-slate-800 mb-2",children:x.nom||"Sans nom"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-2 h-2 bg-red-400 rounded-full"}),(0,r.jsx)("span",{className:"text-sm text-slate-600",children:"Cat\xe9gorie : "}),(0,r.jsx)("span",{className:"font-medium text-red-700 text-sm",children:{social:"Si\xe8ge social",regional:"Si\xe8ge r\xe9gional",technique:"Si\xe8ge technique",provisoire:"Si\xe8ge provisoire"}[(x.categorie||"").toString().trim().toLowerCase()]||x.categorie||"Non d\xe9finie"})]})]}),(0,r.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-sm border border-slate-100/50 p-5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,r.jsx)("div",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Adresse"})]}),(0,r.jsx)("div",{className:"text-base font-medium text-slate-800",children:x.adresse||"Non d\xe9finie"})]}),(0,r.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-sm border border-slate-100/50 p-5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,r.jsx)("div",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Point de contact"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-base font-medium text-slate-800",children:x.nomPointContact||"-"}),(0,r.jsx)("div",{className:"text-sm text-slate-600",children:x.poste||"-"}),(0,r.jsx)("div",{className:"text-sm text-slate-600",children:x.telephone||"-"}),(0,r.jsx)("div",{className:"text-sm text-slate-600",children:x.email||"-"})]})]}),(0,r.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-sm border border-slate-100/50 p-5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-amber-100 to-orange-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("div",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Horaires"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"text-sm text-slate-700",children:[(0,r.jsx)("span",{className:"font-medium",children:"Matin :"})," ",x.horaireMatin||"-"]}),(0,r.jsxs)("div",{className:"text-sm text-slate-700",children:[(0,r.jsx)("span",{className:"font-medium",children:"Apr\xe8s-midi :"})," ",x.horaireApresMidi||"-"]})]})]}),(0,r.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-sm border border-slate-100/50 p-5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-100 to-violet-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("div",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Coordonn\xe9es GPS"})]}),(0,r.jsxs)("div",{className:"text-sm text-slate-700",children:["Lat : ",x.latitude,", Lng : ",x.longitude]})]}),(0,r.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-sm border border-slate-100/50 p-5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-rose-100 to-pink-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-rose-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,r.jsx)("div",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Date de cr\xe9ation"})]}),(0,r.jsx)("div",{className:"text-sm text-slate-700",children:x.createdAt?new Date(x.createdAt).toLocaleDateString("fr-FR"):"-"})]}),Array.isArray(x.photosBatiment)&&x.photosBatiment.length>0&&!p&&(0,r.jsxs)("button",{onClick:()=>g(!0),className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-red-500 to-rose-500 text-white rounded-2xl font-medium hover:from-red-600 hover:to-rose-600 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02]",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Voir les images (",x.photosBatiment.length,")"]}),p&&Array.isArray(x.photosBatiment)&&x.photosBatiment.length>0&&(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-sm border border-slate-100/50 p-5",children:[(0,r.jsxs)("div",{className:"mb-4 text-lg font-semibold text-slate-800 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-red-100 to-rose-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),"Galerie d'images"]}),(0,r.jsx)("div",{className:"bg-slate-50/50 rounded-xl p-3 border border-slate-200/50",children:(0,r.jsx)(o.A,{items:x.photosBatiment.map(e=>({original:"".concat("http://91.204.209.201:8000","/media/").concat(e.image),thumbnail:"".concat("http://91.204.209.201:8000","/media/").concat(e.image),description:e.titre?"".concat(e.titre).concat(e.description?" - "+e.description:""):e.description||""})),showPlayButton:!1,showFullscreenButton:!0,showNav:!0,showThumbnails:!0,slideInterval:3e3,slideOnThumbnailOver:!0,additionalClass:"custom-gallery"})}),(0,r.jsx)("button",{onClick:()=>g(!1),className:"mt-4 w-full px-4 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-medium transition-colors duration-200",children:"Fermer la galerie"})]})]})]})]})}}}]);