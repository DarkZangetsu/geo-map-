(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2997],{183:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var o=r(5155);r(2115);var s=r(9708),n=r(9228),a=r(5384);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i(e){let{className:t,variant:r,size:n,asChild:i=!1,...d}=e,c=i?s.DX:"button";return(0,o.jsx)(c,{"data-slot":"button",className:(0,a.cn)(l({variant:r,size:n,className:t})),...d})}},3225:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var o=r(5155);function s(e){let{isOpen:t,onClose:r,onConfirm:s,title:n,message:a,confirmText:l="Confirmer",cancelText:i="Annuler",confirmButtonClass:d="bg-green-600 hover:bg-green-700",cancelButtonClass:c="bg-gray-300 hover:bg-gray-400",confirmLoading:u=!1,confirmDisabled:m=!1}=e;return t?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n}),(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:a}),(0,o.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,o.jsx)("button",{onClick:r,className:"px-4 py-2 rounded font-semibold text-gray-700 ".concat(c),disabled:u,children:i}),(0,o.jsxs)("button",{onClick:s,className:"px-4 py-2 rounded font-semibold text-white flex items-center justify-center gap-2 ".concat(d),disabled:m,children:[u&&(0,o.jsx)("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline-block"}),l]})]})]})}):null}r(2115)},5489:(e,t,r)=>{"use strict";r.d(t,{z:()=>l});var o=r(2115),s=r(5695),n=r(6254),a=r(5384);function l(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{user:t,isAuthenticated:r,isLoading:l}=(0,n.h)(),i=(0,s.useRouter)();return(0,o.useEffect)(()=>{if(!l){let t=a.Ep.getToken(),r=a.Ep.getUser(),o=window.location.pathname;if(e&&(!t||!r||a.Ep.isTokenExpired(t))){a.Ep.clearAuthData(),"/login"!==o&&"/register"!==o&&i.push("/login");return}}},[l,r,e,i]),{user:t,isAuthenticated:r,isLoading:l,isAuthorized:!e||r}}},6254:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>i,h:()=>d});var o=r(5155),s=r(2115);r(9624);var n=r(5695),a=r(5384);let l=(0,s.createContext)();function i(e){let{children:t}=e,[r,i]=(0,s.useState)(null),[d,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(!0),[x,h]=(0,s.useState)(!1),b=(0,n.useRouter)();(0,s.useEffect)(()=>{let e=a.Ep.getToken(),t=a.Ep.getUser(),r=window.location.pathname;e&&t&&!a.Ep.isTokenExpired(e)?(i(t),c(!0)):(i(null),c(!1),a.Ep.clearAuthData(),["/","/login","/register","/pepinieres-globales","/parcelles-globales","/sieges-globaux"].includes(r)||b.push("/login")),m(!1)},[b]);let g=async()=>{h(!0),await new Promise(e=>setTimeout(e,700)),a.Ep.clearAuthData(),i(null),c(!1),h(!1);let e=window.location.pathname;"/"!==e&&"/login"!==e&&"/register"!==e&&b.push("/")};return(0,o.jsx)(l.Provider,{value:{user:r,isAuthenticated:d,isLoading:u,isLoggingOut:x,login:(e,t)=>{if("string"!=typeof t||!t.trim())return void console.error("Tentative de login avec un token invalide:",t);a.Ep.setAuthData(t,e),i(e),c(!0)},logout:g},children:t})}function d(){return(0,s.useContext)(l)}},9606:(e,t,r)=>{Promise.resolve().then(r.bind(r,9750))},9624:(e,t,r)=>{"use strict";r.d(t,{A:()=>x});var o=r(8592),s=r(524),n=r(2641),a=r(4076),l=r(1957),i=r(883),d=r(9159);let c=(0,i.A)({uri:"".concat("http://91.204.209.201:8000","/graphql/")}),u=(0,a.o)((e,t)=>{let{headers:r}=t,o=localStorage.getItem("token");if(o)try{let e=(0,d.s)(o),t=Date.now()/1e3;if(e.exp<t)return localStorage.removeItem("token"),localStorage.removeItem("user"),{headers:{...r,authorization:""}}}catch(e){return console.error("Apollo Client - Erreur lors du d\xe9codage du token:",e),localStorage.removeItem("token"),localStorage.removeItem("user"),{headers:{...r,authorization:""}}}return{headers:{...r,authorization:o?"JWT ".concat(o):""}}}),m=(0,l.S)(e=>{let{graphQLErrors:t,networkError:r,operation:o,forward:s}=e;t&&t.forEach(e=>{let{message:t,locations:r,path:o,extensions:s}=e;console.error("[GraphQL error]: Message: ".concat(t,", Location: ").concat(r,", Path: ").concat(o)),((null==s?void 0:s.code)==="UNAUTHENTICATED"||t.includes("authentication")||t.includes("decoding signature")||t.includes("token")||t.includes("expired"))&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/errors/401"),((null==s?void 0:s.code)==="BAD_REQUEST"||t.includes("bad request")||t.includes("invalid"))&&(window.location.href="/errors/400"),((null==s?void 0:s.code)==="NOT_FOUND"||t.includes("not found"))&&(window.location.href="/errors/404"),((null==s?void 0:s.code)==="INTERNAL_SERVER_ERROR"||t.includes("server error"))&&(window.location.href="/errors/500")}),r&&(console.error("[Network error]: ".concat(r)),400===r.statusCode?window.location.href="/errors/400":401===r.statusCode?(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/errors/401"):404===r.statusCode?window.location.href="/errors/404":500===r.statusCode&&(window.location.href="/errors/500"))}),x=new o.R({link:(0,s.H)([m,u,c]),cache:new n.D,defaultOptions:{watchQuery:{errorPolicy:"all"},query:{errorPolicy:"all"}}})},9750:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var o=r(5155),s=r(2115),n=r(1929),a=r(8095),l=r(3593),i=r(6671),d=r(5489),c=r(3225),u=r(6254),m=r(5384),x=r(5452),h=r(4416);function b(e){let{...t}=e;return(0,o.jsx)(x.bL,{"data-slot":"dialog",...t})}function g(e){let{...t}=e;return(0,o.jsx)(x.ZL,{"data-slot":"dialog-portal",...t})}function f(e){let{...t}=e;return(0,o.jsx)(x.bm,{"data-slot":"dialog-close",...t})}function p(e){let{className:t,...r}=e;return(0,o.jsx)(x.hJ,{"data-slot":"dialog-overlay",className:(0,m.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...r})}function v(e){let{className:t,children:r,showCloseButton:s=!0,...n}=e;return(0,o.jsxs)(g,{"data-slot":"dialog-portal",children:[(0,o.jsx)(p,{}),(0,o.jsxs)(x.UC,{"data-slot":"dialog-content",className:(0,m.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[r,s&&(0,o.jsxs)(x.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,o.jsx)(h.A,{}),(0,o.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function j(e){let{className:t,...r}=e;return(0,o.jsx)("div",{"data-slot":"dialog-header",className:(0,m.cn)("flex flex-col gap-2 text-center sm:text-left",t),...r})}function w(e){let{className:t,...r}=e;return(0,o.jsx)("div",{"data-slot":"dialog-footer",className:(0,m.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...r})}function y(e){let{className:t,...r}=e;return(0,o.jsx)(x.hE,{"data-slot":"dialog-title",className:(0,m.cn)("text-lg leading-none font-semibold",t),...r})}function N(e){let{className:t,...r}=e;return(0,o.jsx)(x.VY,{"data-slot":"dialog-description",className:(0,m.cn)("text-muted-foreground text-sm",t),...r})}var k=r(183);function P(e){let{open:t,onOpenChange:r,onSubmit:n,loading:a}=e,[l,i]=(0,s.useState)({old:"",new1:"",new2:""}),d=e=>{let{name:t,value:r}=e.target;i(e=>({...e,[t]:r}))};return(0,o.jsx)(b,{open:t,onOpenChange:r,children:(0,o.jsx)(v,{children:(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(l,()=>i({old:"",new1:"",new2:""}))},className:"flex flex-col gap-4",children:[(0,o.jsxs)(j,{children:[(0,o.jsx)(y,{children:"Changer mon mot de passe"}),(0,o.jsx)(N,{children:"Veuillez saisir votre ancien et nouveau mot de passe."})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ancien mot de passe"}),(0,o.jsx)("input",{type:"password",name:"old",value:l.old,onChange:d,required:!0,minLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:a})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nouveau mot de passe"}),(0,o.jsx)("input",{type:"password",name:"new1",value:l.new1,onChange:d,required:!0,minLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:a})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmer le nouveau mot de passe"}),(0,o.jsx)("input",{type:"password",name:"new2",value:l.new2,onChange:d,required:!0,minLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:a})]}),(0,o.jsxs)(w,{children:[(0,o.jsx)(k.$,{type:"submit",disabled:a||!l.old||!l.new1||!l.new2,children:a?"Enregistrement...":"Enregistrer"}),(0,o.jsx)(f,{asChild:!0,children:(0,o.jsx)(k.$,{type:"button",variant:"outline",children:"Annuler"})})]})]})})})}function C(){let{isLoading:e,isAuthorized:t}=(0,d.z)(!0),{isAuthenticated:r}=(0,u.h)(),{data:x,loading:h,refetch:b,error:g}=(0,n.IT)(l.QG,{skip:!r,onError:e=>{console.error("Erreur GET_ME:",e)}}),[f]=(0,a.n)(l.ZY),[p]=(0,a.n)(l.yU),[v]=(0,a.n)(l.Qx),[j]=(0,a.n)(l.lj),w=null==x?void 0:x.me,[y,N]=(0,s.useState)({nomInstitution:"",nomProjets:[],newProjet:"",email:"",abreviation:"",logo:null});s.useEffect(()=>{w&&N({nomInstitution:w.nomInstitution||"",nomProjets:w.nomProjet?w.nomProjet.split(",").map(e=>e.trim()).filter(Boolean):[],newProjet:"",email:w.email||"",abreviation:w.abreviation||"",logo:null})},[w]);let[k,C]=(0,s.useState)(!1),[E,L]=(0,s.useState)(!1),[z,A]=(0,s.useState)(!1),[S,I]=(0,s.useState)(!1),[R,M]=(0,s.useState)(!1),[T,_]=(0,s.useState)(null);if(e||!t)return(0,o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center bg-white rounded-2xl shadow-xl p-8 backdrop-blur-sm border border-white/20",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),(0,o.jsx)("p",{className:"mt-4 text-slate-600 font-medium",children:e?"V\xe9rification de l'authentification...":"Redirection vers la page de connexion..."})]})});if(!r)return(0,o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:(0,o.jsx)("div",{className:"text-center bg-white rounded-2xl shadow-xl p-8",children:(0,o.jsx)("div",{className:"text-slate-500 text-lg",children:"Veuillez vous connecter pour acc\xe9der \xe0 votre profil."})})});if(h)return(0,o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})});if(g)return(0,o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:(0,o.jsx)("div",{className:"text-center bg-white rounded-2xl shadow-xl p-8",children:(0,o.jsxs)("div",{className:"text-red-500 mb-4 font-medium",children:["Erreur lors du chargement du profil: ",g.message]})})});if(!w)return(0,o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:(0,o.jsx)("div",{className:"text-center bg-white rounded-2xl shadow-xl p-8",children:(0,o.jsx)("div",{className:"text-slate-500 text-lg",children:"Aucune donn\xe9e utilisateur."})})});let D=e=>{e.preventDefault();let t=y.newProjet.trim();t&&!y.nomProjets.includes(t)&&N(e=>({...e,nomProjets:[...e.nomProjets,t],newProjet:""}))},U=e=>{N(t=>({...t,nomProjets:t.nomProjets.filter(t=>t!==e)}))},B=async e=>{if(e.preventDefault(),y.nomInstitution===w.nomInstitution&&y.nomProjets.join(", ")===(w.nomProjet||"")&&y.email===w.email&&y.abreviation===w.abreviation)return void i.oR.error("Aucune modification d\xe9tect\xe9e");_("save"),M(!0)},W=async()=>{L(!0);try{let e=!0,t="";if(y.abreviation!==w.abreviation){let{data:r}=await f({variables:{userId:w.id,abreviation:y.abreviation}});r.updateUserAbreviation.success||(e=!1,t=r.updateUserAbreviation.message)}if(e&&(y.nomInstitution!==w.nomInstitution||y.nomProjets.join(", ")!==(w.nomProjet||"")||y.email!==w.email)){let{data:r}=await v({variables:{nomInstitution:y.nomInstitution,nomProjet:y.nomProjets.join(", "),email:y.email}});r.updateUserProfile.success||(e=!1,t=r.updateUserProfile.message)}e?(i.oR.success("Profil mis \xe0 jour avec succ\xe8s"),C(!1),b()):i.oR.error(t||"Erreur lors de la mise \xe0 jour")}catch(e){console.error("Erreur lors de la mise \xe0 jour:",e),i.oR.error("Erreur lors de la mise \xe0 jour")}finally{L(!1),M(!1),_(null)}},O=async e=>{var t;(null==(t=e.target.files)?void 0:t[0])&&(_("logo"),M(!0))},H=async()=>{L(!0);try{var e;let t=null==(e=document.querySelector('input[name="logo"]').files)?void 0:e[0];if(!t)return void i.oR.error("Aucun fichier s\xe9lectionn\xe9");let{data:r}=await p({variables:{logo:t}});r.updateUserLogo.success?(i.oR.success("Logo mis \xe0 jour avec succ\xe8s"),b()):i.oR.error(r.updateUserLogo.message)}catch(e){i.oR.error("Erreur lors de la mise \xe0 jour du logo")}finally{L(!1),M(!1),_(null)}},V=async(e,t)=>{if(e.new1!==e.new2)return void i.oR.error("Les nouveaux mots de passe ne correspondent pas");I(!0);try{let{data:r}=await j({variables:{oldPassword:e.old,newPassword:e.new1}});r.changePassword.success?(i.oR.success("Mot de passe modifi\xe9 avec succ\xe8s"),A(!1),t&&t()):i.oR.error(r.changePassword.message)}catch(e){i.oR.error("Erreur lors du changement de mot de passe")}finally{I(!1)}},q=()=>{N({nomInstitution:w.nomInstitution||"",nomProjets:w.nomProjet?w.nomProjet.split(",").map(e=>e.trim()).filter(Boolean):[],newProjet:"",email:w.email||"",abreviation:w.abreviation||"",logo:null})};return(0,o.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 py-8 px-4",children:[(0,o.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,o.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mon profil"}),(0,o.jsx)("p",{className:"text-slate-600",children:"G\xe9rez vos informations personnelles et pr\xe9f\xe9rences"})]})}),(0,o.jsx)("div",{className:"bg-white rounded-3xl shadow-xl border border-white/20 backdrop-blur-sm overflow-hidden",children:(0,o.jsxs)("form",{onSubmit:B,className:"p-8",children:[(0,o.jsxs)("div",{className:"flex items-center gap-6 mb-8 pb-8 border-b border-slate-100",children:[(0,o.jsxs)("div",{className:"relative group",children:[w.logo?(0,o.jsx)("img",{src:(0,m.D1)(w.logo),alt:"Logo",className:"w-24 h-24 rounded-2xl object-cover border-4 border-white shadow-lg group-hover:shadow-xl transition-shadow"}):(0,o.jsx)("div",{className:"w-24 h-24 rounded-2xl bg-gradient-to-br from-blue-100 to-blue-200 border-4 border-white shadow-lg flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,o.jsx)("div",{className:"absolute -bottom-2 -right-2 bg-blue-500 rounded-full p-2 shadow-lg group-hover:bg-blue-600 transition-colors",children:(0,o.jsxs)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Photo de profil"}),(0,o.jsx)("input",{type:"file",name:"logo",accept:"image/*",onChange:O,disabled:E,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-3 file:px-6 file:rounded-xl file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 file:transition-colors"}),(0,o.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"PNG, JPG ou GIF (max. 2MB)"})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-slate-700",children:"Nom de l'institution"}),(0,o.jsx)("input",{type:"text",name:"nomInstitution",value:y.nomInstitution,readOnly:!0,className:"w-full px-4 py-3 border border-slate-200 rounded-xl bg-slate-50 cursor-not-allowed text-slate-600 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-300 transition-colors"})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-slate-700",children:"Email"}),(0,o.jsx)("input",{type:"email",name:"email",value:y.email,onChange:e=>{let{name:t,value:r,files:o}=e.target;N(e=>({...e,[t]:o?o[0]:r}))},disabled:!k||E,className:"w-full px-4 py-3 border rounded-xl transition-colors focus:ring-2 focus:ring-blue-500/20 focus:border-blue-300 ".concat(k?"border-slate-300 bg-white text-slate-800":"border-slate-200 bg-slate-50 text-slate-600")})]})]}),(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Projets rattach\xe9s"}),(0,o.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,o.jsx)("input",{type:"text",name:"newProjet",value:y.newProjet,onChange:e=>{let t=e.target.value;if(t.endsWith(",")){let e=t.slice(0,-1).trim();e&&!y.nomProjets.includes(e)?N(t=>({...t,nomProjets:[...t.nomProjets,e],newProjet:""})):N(e=>({...e,newProjet:""}))}else N(e=>({...e,newProjet:t}))},onKeyDown:e=>{"Enter"===e.key&&D(e)},disabled:!k||E,className:"flex-1 px-4 py-3 border rounded-xl transition-colors focus:ring-2 focus:ring-blue-500/20 focus:border-blue-300 ".concat(k?"border-slate-300 bg-white text-slate-800":"border-slate-200 bg-slate-50 text-slate-600"),placeholder:"Ajouter un projet et appuyer sur Entr\xe9e ou ,"}),(0,o.jsx)("button",{type:"button",onClick:D,disabled:!k||E||!y.newProjet.trim(),className:"px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold shadow-lg hover:shadow-xl",children:(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),(0,o.jsx)("div",{className:"flex flex-wrap gap-3",children:y.nomProjets.map((e,t)=>(0,o.jsxs)("span",{className:"bg-gradient-to-r from-blue-100 to-blue-200 text-blue-800 px-4 py-2 rounded-xl text-sm flex items-center font-medium shadow-sm",children:[e,k&&(0,o.jsx)("button",{type:"button",onClick:()=>U(e),className:"ml-2 text-blue-800 hover:text-red-600 transition-colors p-1 rounded-full hover:bg-white/50",children:(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))})]}),(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Abr\xe9viation"}),(0,o.jsx)("input",{type:"text",name:"abreviation",value:y.abreviation,readOnly:!0,maxLength:20,className:"w-full px-4 py-3 border border-slate-200 rounded-xl bg-slate-50 cursor-not-allowed text-slate-600 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-300 transition-colors"})]}),(0,o.jsx)("div",{className:"flex justify-end gap-4 pt-6 border-t border-slate-100",children:k?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{type:"button",onClick:()=>{C(!1),q()},className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-xl hover:bg-slate-300 font-semibold transition-colors flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Annuler"]}),(0,o.jsx)("button",{type:"submit",disabled:E,className:"px-8 py-3 bg-green-500 text-white rounded-xl hover:bg-green-600 font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center gap-2",children:E?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enregistrement..."]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Enregistrer"]})})]}):(0,o.jsxs)("button",{type:"button",onClick:()=>C(!0),className:"px-8 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Modifier"]})})]})}),(0,o.jsx)("div",{className:"mt-8 bg-white rounded-3xl shadow-xl border border-white/20 backdrop-blur-sm p-8",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"S\xe9curit\xe9"}),(0,o.jsx)("p",{className:"text-slate-600",children:"Modifiez votre mot de passe pour s\xe9curiser votre compte"})]}),(0,o.jsxs)("button",{type:"button",onClick:()=>A(!0),className:"px-6 py-3 bg-slate-200 text-slate-700 rounded-xl hover:bg-slate-300 font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Changer mon mot de passe"]})]})})]}),(0,o.jsx)(P,{open:z,onOpenChange:A,onSubmit:V,loading:S}),(0,o.jsx)(c.A,{isOpen:R,onClose:()=>{M(!1),_(null)},onConfirm:()=>{"save"===T?W():"logo"===T&&H()},title:"save"===T?"Confirmer la modification":"Confirmer le changement de logo",message:"save"===T?"\xcates-vous s\xfbr de vouloir modifier vos informations de profil ?":"\xcates-vous s\xfbr de vouloir changer votre logo ?",confirmText:"Confirmer",cancelText:"Annuler"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2871,8916,1929,9516,59,6671,4269,6800,8441,1684,7358],()=>t(9606)),_N_E=e.O()}]);